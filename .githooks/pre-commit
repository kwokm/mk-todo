#!/bin/sh

# Rewrite private Artifactory registry URLs in bun.lock to public npm registry
# so Vercel (and other CI) can resolve packages.

if git diff --cached --name-only | grep -q '^bun.lock$'; then
  sed -i '' 's|https://global.block-artifacts.com/artifactory/api/npm/square-npm/|https://registry.npmjs.org/|g' bun.lock
  git add bun.lock
fi
